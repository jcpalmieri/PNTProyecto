@model IEnumerable<PNTProyecto.Models.Publicacion>

    @{
    ViewData["Title"] = "Publicaciones";
    }

    @if (User.Identity.IsAuthenticated)
{
    <p>El usuario esta logeado</p>
}
else
{
    <p>El usuario no esta logeado</p>
}
    <div class="filter-bar-container">
        <div class="filter-bar"> 
            <select id="FiltroDeBusqueda" onchange="filtrarPublicaciones()">
                <option value="">Todas las publicaciones</option> 
                <option value="perro">Perro</option>
                <option value="gato">Gato</option>
                <option value="ave">Ave</option>
                <option value="pez">Pez</option>
                <option value="roedor">Roedor</option>
            </select>
        </div>
    </div>

    <div class="publicaciones-grid">
        @foreach (var item in Model)
    {
        <div class="publicacion-card tipo-@item.TipoMascota.ToLower()">
                <button type="button" class="publicacion-button" onclick="redirectToDetails('@item.nroPublicacion')">
                    <h2>@item.NombreMascota</h2>
                    <img src="@item.Imagen" alt="@item.NombreMascota" style="max-width: 100%;" />
                    <p>@item.Descripcion</p>
                </button>
        </div>
    }
    </div>

    @section Scripts {

        <script>
            function redirectToDetails(nroPublicacion) {
                window.location.href = '/Publicaciones/Details/' + nroPublicacion; // te redirige al detail de x publicacion.
            }

            function filtrarPublicaciones() {
                var filtro = document.getElementById('FiltroDeBusqueda').value.toLowerCase();// Obtiene la opcion del filtro seleccionada, ej "Perro"
                var publicaciones = document.querySelectorAll('.publicacion-card'); // selecciona todas las publicaciones

                publicaciones.forEach(function (pub) { // recorre toda la lista
                    var tipoMascota = pub.classList[1]; 

                    if (filtro === '' || tipoMascota === 'tipo-' + filtro) { // Si el filtro esta vacio o coincide con el tipo de la publicacion.
                        pub.style.display = 'block'; // Lo muestra
                    } else {
                        pub.style.display = 'none'; // Oculta la publicación si no coincide con el filtro
                    }
                });
            }
        </script>
    }
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #333;
            color: #fff;
        }
        .filter-bar-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        .filter-bar {
            margin-right: 10px;
        }

            .filter-bar select {
                padding: 8px;
                font-size: 16px;
                background-color: #555;
                color: #fff;
                border: none;
                border-radius: 4px;
            }

        .publicaciones-grid {
            display: flex; 
            flex-wrap: wrap; 
            gap: 16px; 
            padding: 16px;
            justify-content: center; 
        }

        .publicacion-card {
            background-color: #666;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
            max-width: 300px;
            width: 100%;
            margin-bottom: 16px; 
        }

            .publicacion-card:hover {
                transform: scale(1.05);
            }

            .publicacion-card h2 {
                color: #4CAF50;
            }

            .publicacion-card img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
            }

            .publicacion-card p {
                margin-top: 10px;
                color: #fff;
            }
    </style>

